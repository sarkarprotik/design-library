"use strict";var flysasLibrary=window.flysasLibrary||{};flysasLibrary.modals=flysasLibrary.modals=function(e,y){var a=y.querySelectorAll("[data-modal]"),n=y.querySelectorAll(".flysas.modal");function o(l){var s,d,e=l.querySelector(".modal-content"),t=l.querySelectorAll("[data-close=true]"),a="open"===l.getAttribute("data-onload"),c=Array.prototype.slice.call(e.querySelectorAll("a[href], button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled])")),n=c[0],o=c[c.length-1];function u(e){l.classList.remove("open"),y.body.classList.remove("locked"),s.focus()}l.open=function(e){var t,a,n,o,r,i=e.href;i&&!d&&(a=function(e){d=e,l.querySelector(".dynamic-content").innerHTML=d},n=(t={url:i+".content.html"}).data?"POST":"GET",o=t.url.match(/^http/gi)?t.url:hostname+t.url,(r=new XMLHttpRequest).onreadystatechange=function(){4==this.readyState&&200==this.status?a(r.responseText):4==this.readyState&&200!=this.status&&a("")},r.open(n,o,!0),r.send()),s=e,l.addEventListener("click",function(e){e.stopPropagation(),u()}),l.classList.add("open"),y.body.classList.add("locked"),c[0]&&c[0].focus(),l.querySelector(".flysas-accordion")&&flysasLibrary.accordions&&flysasLibrary.accordions.init(l.querySelectorAll(".flysas-accordion"))},e.addEventListener("click",function(e){e.stopPropagation()}),e.addEventListener("keydown",function(e){switch(e.keyCode){case 27:u();break;case 9:if(c.length<=1){e.preventDefault();break}y.activeElement===n&&e.shiftKey?(e.preventDefault(),o.focus()):y.activeElement!==o||e.shiftKey||(e.preventDefault(),n.focus())}});for(var r=0;r<t.length;r++)t[r].addEventListener("click",u);a&&open()}function t(){a=y.querySelectorAll("[data-modal]"),n=y.querySelectorAll(".flysas.modal");for(var e=0;e<n.length;e++)n[e].initiated||(n[e].initiated=!0,new o(n[e]));for(e=0;e<a.length;e++){var t=a[e];t.initiated||(t.initiated=!0,t.addEventListener("click",function(e){e.preventDefault();var t=y.getElementById(this.getAttribute("data-modal"));t&&t.open(this)}))}}return t(),e.addEventListener("DOMContentLoaded",t),e.addEventListener("load",t),{init:t}}(window,document);