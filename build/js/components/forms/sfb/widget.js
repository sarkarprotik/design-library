"use strict";var flysasLibrary=window.flysasLibrary||{};flysasLibrary.market=flysasLibrary.market||function(e,a){for(var t,s,r=["/onboard"],n=!1,o="lu",i="en",l={se:"sv",no:"no",dk:"da",fi:"en"},c=a.hostname.match(/^.+\.sas\.(se|no|dk|fi)/gi),d=a.hostname.match(/^.+\.flysas\.com/gi),f=a.pathname.match(/^\/[a-z]{2}-[a-z]{2}(\/|$)/g),m=!!a.pathname.match(/^\/en(\/|$)/g),y=0;y<r.length;y++)n=n||new RegExp(r[y],"i").test(a.pathname);function p(){var e;return c?(t=c[0].replace(/.+\.sas\./gi,""),s=l[t],m&&(s="en")):d&&m||!f?(t=o,s=i):f&&(e=f[0].split("-"),t=(e[0]||"").replace("/",""),s=(e[1]||"").replace("/","")),n?{country:"se",language:"en"}:{country:t||o,language:s||i}}return e.flysasMarket=p(),{getCountryAndLanguage:p}}(window,(document,window.location));var flysasApp=window.flysasApp||{};flysasApp.forms=window.flysasApp.forms||{},flysasApp.forms.sfb=window.flysasApp.forms.sfb||{},flysasApp.forms.sfb.widget=flysasApp.forms.sfb.widget||function(e,l){var c,a=flysasLibrary.market.getCountryAndLanguage(),d=a.country,t=a.language;d=((e.location.search.match(/(\?|\&)countrycode=[^\&|$]+/gi)||[])[0]||"").replace(/(\?|\&)countrycode=/gi,"")||d,t=((e.location.search.match(/(\?|\&)languagecode=[^\&|$]+/gi)||[])[0]||"").replace(/(\?|\&)languagecode=/gi,"")||t;var n=l.querySelector(".flysas-sfb-form");if(n){var f,o,m="sports"===(c=n.classList.contains("flysas-sfb-corporate")?"corporate":"sports"),y="corporate"===c,s="/widgets/forms/"+c+"/"+d+"-"+t,p="/widgets/forms/"+c;e.location.hostname.match(/^((www|test)\.)(fly)?sas\.(se|no|dk|fi|com)$/gi)&&(s="/v2/de-design-library"+s,p="/v2/de-design-library"+p);var i="";g({url:s},function(e){n.innerHTML=e;for(var a,t,s=n.getElementsByTagName("script"),r=0;r<s.length;r++)a=s[r],t=void 0,(t=l.createElement("script")).textContent=a.innerText,l.head.insertBefore(t,l.head.childNodes[l.head.childNodes.length-1].nextSibling);f=n.querySelector(".flysas-forms-widget"),(o=n.querySelector("form"))&&(o.addEventListener("submit",b),f.querySelector("h2").addEventListener("click",h))})}function u(e){var a=l.getElementById(e);return a&&("checkbox"!==a.type||a.checked)?a.value.trim():""}function r(e,a){var t=l.getElementById(e);if(t){"checkbox"===t.type&&(t.checked=a),t.value=a;var s=l.querySelector("[data-name='"+e.replace(c+"-","")+"']");s&&s.classList.add("focused")}}function g(e,a){var t=e.data?"POST":"GET",s=e.url.match(/^http/gi)?e.url:i+e.url,r=new XMLHttpRequest;if(r.onreadystatechange=function(){4==this.readyState&&200==this.status?a(r.responseText):4==this.readyState&&200!=this.status&&a("")},r.open(t,s,!0),e.data)if(r.setRequestHeader("Content-type","application/json"),"string"==typeof e.data)r.send(e.data);else{var n=[];for(var o in e.data)n.push(o+"="+e.data[o]);r.send(n.join("&"))}else r.send()}function h(e){if(e.shiftKey){r(c+"-organisationname","Testet IK"),r(c+"-organisationnumber",{se:"123456-7890",no:"123456789",dk:"12345678",fi:"1234567-8",lu:"12345678"}[d]),r(c+"-address","Gatan 1"),r(c+"-zip","12345"),r(c+"-city","Staden"),r(c+"-firstname","Krakel"),r(c+"-lastname","Spektakel"),r(c+"-email","krakel@spektakel.com"),r(c+"-tel","085554433"),r(c+"-sportorganisation",!0),r(c+"-approve-yes",!0)}}function v(){var e=o.querySelector("button"),a=e.disabled;e.disabled=!a}function b(e){e.preventDefault(),v();for(var a,t=!0,s=l.querySelectorAll(".flysas-sfb-form form .mandatory input"),r=0;r<s.length;r++)if(!(t="checkbox"===s[r].type?s[r].checked:!s[r].validate||s[r].validate())){a=s[r];break}if(t){var n={companyDetails:{companyName:u(c+"-organisationname"),vatOrOrgNumber:u(c+"-organisationnumber"),address:u(c+"-address"),zipCode:u(c+"-zip"),city:u(c+"-city"),state:""},primaryTravelManager:{firstName:u(c+"-firstname"),lastName:u(c+"-lastname"),email:u(c+"-email"),phoneNumber:u(c+"-tel")},alternativeTravelManager:{firstName:u(c+"-firstname-secondary"),lastName:u(c+"-lastname-secondary"),email:u(c+"-email-secondary")}};if(m&&(n.companyDetails.country=d.toUpperCase(),n.companyDetails.soContactSportOrg=u(c+"-sportorganisation"),n.companyDetails.soContactForm="Sport",n.companyDetails.soContactSASContact="Sport Agreements"),"se"===d||"no"===d||"dk"===d||"fi"===d)o=d.toUpperCase();else var o=u(c+"-country");y&&(n.companyDetails.country=o),console.log("POST",n);var i=JSON.stringify(n);g({url:p,data:i},function(e){var a=200===(e=JSON.parse(e)).statusCode?f.querySelector(".success"):f.querySelector(".failure");a&&(a.hidden=!1,a.scrollIntoView({behavior:"smooth"}),a.classList.contains("failure")&&v())})}else a.scrollIntoView({behavior:"smooth"})}}(window,document);