!function(e,t,s){class n extends S4SInputBase{constructor(){super(),this.data={}}connectedCallback(){this.init(s.templates.datePicker.input),this.prepare(),this.createTooltip(),this.addFocusAndBlurEvents(this.elements.input),this.addTemplates(),this.bindEvents(),this.subscribe("triptypeToggle",e=>{this.mode="oneway"===e.detail.id?"single":"double"})}bindEvents(){let e=null;const t=this;this.elements.input.addEventListener("focus",s=>{clearTimeout(e),e=setTimeout(()=>{t.elements.calendar.removeAttribute("hidden")},200)}),this.elements.input.addEventListener("blur",s=>{clearTimeout(e),e=setTimeout(()=>{t.elements.calendar.setAttribute("hidden",!0)},200)}),this.elements.outbound.addEventListener("click",t=>this.handleCalendarClick(t,this.elements.outbound,e)),this.elements.inbound.addEventListener("click",t=>this.handleCalendarClick(t,this.elements.inbound,e)),this.subscribe("sasInputFocused",e=>{e.detail!==this.elements.input&&this.elements.calendar.setAttribute("hidden",!0)})}handleCalendarClick(e,t,s){if(e.preventDefault(),e.stopPropagation(),clearTimeout(s),s=null,e.target.data)t.selectedElem&&t.selectedElem.classList.remove("selected"),t.selectedElem=e.target,t.selectedElem.classList.add("selected"),t.selectedDate=e.target.data.iso,this.setInputValue(!0);else if(e.target&&e.target.className.match(/btn-(prev|next)/gi)){const s=e.target.className.match(/btn-prev/gi)?-1:1;this.addMonth(t,s),t===this.elements.outbound&&this.elements.inbound.index<this.elements.outbound.index?this.addMonth(this.elements.inbound,s):t===this.elements.inbound&&this.elements.inbound.index<this.elements.outbound.index&&this.addMonth(this.elements.outbound,s)}}setInputValue(e){const t=!this.departureDates.match(/x/gi);(e||t)&&(this.classList.add("focused"),this.elements.input.value=this.departureDates,t&&this.elements.calendar.setAttribute("hidden",!0))}addTemplates(){this.appendTemplate(s.templates.datePicker.tablesWrap,this.elements.calendar),this.setElements(),this.addTable(this.elements.outbound),this.addTable(this.elements.inbound)}addTable(e){this.appendTemplate(s.templates.datePicker.table,e),this.setElements(e),this.addMonth(e),e.selectedDate="xxxx-xx-xx"}addMonth(e,t){e.index=e.index||0,e.index+=t||0;const s=e.elements.body;s.innerHTML="";const n=new Date,i=new Date(n.getFullYear(),n.getMonth()+e.index,1,12),a=i.getMonth();let d=[{},{},{},{},{},{},{}];for(let e=1;e<=31;e++){const t=new Date(i.getFullYear(),i.getMonth(),e,12),n=this.getDatePart(t.getMonth()+1),a=this.getDatePart(t.getDate()),l=`${t.getFullYear()}-${n}-${a}`,u=`${t.getFullYear()}${n}${a}`;if(t.getDate()!==e)break;0===t.getDay()?(d[6].iso=l,d[6].id=u,d[6].day=t.getDate(),this.addWeek(d,s),d=[{},{},{},{},{},{},{}]):(d[t.getDay()-1].iso=l,d[t.getDay()-1].id=u,d[t.getDay()-1].day=t.getDate())}this.addWeek(d,s),e.elements.monthName.innerText=this.monthNames[a],e.elements.type.innerText=e===this.elements.outbound?this.outboundLabel:this.inboundLabel}addWeek(e,t){const n=this.appendTemplate(s.templates.datePicker.week,t).querySelectorAll("button");for(let t=0;t<=6;t++)n[t].data=e[t],n[t].setAttribute("data-date",e[t].dateId||0),n[t].innerText=e[t].day||""}getDatePart(e){return e&&1===e.toString().length?`0${e}`:e}static get observedAttributes(){return[]}attributeChangedCallback(){}get market(){return this.getAttribute("market")||"se-sv"}get monthNames(){return(this.getAttribute("monthNames")||"").split(",")}get outboundLabel(){return this.getAttribute("outbound-label")}get inboundLabel(){return this.getAttribute("inbound-label")}get dateDelimiter(){return this.getAttribute("date-delimiter")}get departureDates(){let e=`${this.elements.outbound.selectedDate} ${this.dateDelimiter} ${this.elements.inbound.selectedDate}`;return"single"===this.mode&&(e=`${this.elements.outbound.selectedDate}`),e}get mode(){return this.getAttribute("mode")||"double"}set mode(e){this.elements.calendar.setAttribute("hidden",!0),this.setAttribute("mode",e),"single"===e?(this.elements.inboundWrap.setAttribute("hidden",!0),this.setInputValue(!this.elements.outbound.selectedDate.match(/x/gi))):(this.elements.inboundWrap.removeAttribute("hidden"),this.setInputValue(!this.elements.outbound.selectedDate.match(/x/gi)||!this.elements.inbound.selectedDate.match(/x/gi)))}}e.customElements.define("s4s-datepicker",n)}(window,document,window.s4s);